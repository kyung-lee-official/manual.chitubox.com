import { ColorTag } from "@/docComponents/colorTag/ColorTag";
import { LightOffDelayCalculator } from "@/docComponents/lightOffDelayCalculator/LightOffDelayCalculator";
import { BilibiliVideoContainer } from "@/components/videoContainer/BilibiliVideoContainer";
import { Collapse } from "@/components/collapse/Collapse";
import { Entry } from "@/docComponents/entry/Entry";
import { Tsmc } from "@/docComponents/tsmc/Tsmc";
import { GearIcon } from "@/components/icons/ChituboxProIcons";

export const metadata = {
	title: "切片设置",
	authors: [{ name: "CHITUBOX Team" }],
	description: "在 CHITUBOX Pro 中设置打印参数。",
	other: {
		pageId: "/zh-CN/chitubox-pro/v2.0.0/slice-settings",
	},
	openGraph: {
		images: ["/images/docs/og_logo.png"],
	},
};

# 切片设置

## 机器

| 参数         | 说明                                                                               |
| ------------ | ---------------------------------------------------------------------------------- |
| 名称         | 当前打印机的名称                                                                   |
| 机器类型     | 机器的类型说明                                                                     |
| 镜像         | 镜像模式选择                                                                       |
| 分辨率       | X: X 轴方向的像素个数 <br /> Y: Y 轴方向的像素个数                                 |
| 尺寸         | X 轴方向的最大打印尺寸 <br /> Y 轴方向的最大打印尺寸 <br /> Z 轴方向的最大打印尺寸 |
| 锁定比例     | X 轴和 Y 轴的尺寸和分辨率的比值相等                                                |
| 构建区域偏移 | 设定打印区域边界线                                                                 |

<Admonition type="note" title="注意">
	点击<SpanA href="https://www.chitubox.com/zh/article/support/howto/chitubox-free/slicing/44">📃这里</SpanA>了解更多关于<b>镜像</b>的内容。

    **构建区域偏移**是为固化屏幕边缘存在坏点或者屏幕边缘部分作为非工作区域的情况设计的，设置偏移可以避开坏点。
</Admonition>

## 树脂

在这里您可以配置树脂的基本信息，包括树脂的名称、类型、颜色、密度、价格等。CHITUBOX 将使用这些信息来计算树脂的使用量和打印成本。

## 打印

在这里设置你的打印参数。

<Admonition type="note" title="注意">
	目前只有部分打印机支持 **静止时间** 等待模式，点击<SpanA href="https://wkhvloo2kw.feishu.cn/docx/W9XedDtuqoHK2IxsicvccQthngf">📃这里</SpanA>查看机器兼容性表格。
</Admonition>

| 参数             | 说明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 层厚             | 每打印一层的厚度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 底层数           | 起始打印层数。当底层数为 n 时，前 n 层的曝光时间均为底层曝光时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 曝光时间         | 正常打印层的曝光时间                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 底层曝光时间     | 底层的曝光时间。适当增加底层曝光时间有助于增加打印模型与打印平台的粘结强度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 过渡层数         | 底层之后的过渡层数，使各层之间的粘合更紧密。除曝光时间外，过渡层的其他参数与正常层一致                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 过渡类型         | 设置从底层过渡到正常层时曝光时间的过渡类型                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 打印过程等待模式 | <em>静止时间：</em><ul><li>抬升前的静止时间: 打印曝光结束到打印平台开始远离曝光面的间隔时间差</li><li>抬升后的静止时间: 打印平台打印抬升后开始静止到开始回程的间隔时间差</li><li>回程后的静止时间: 打印平台运动至打印面开始静止到开始曝光的间隔时间差</li></ul><em>灯灭延迟：</em><br />灯灭延迟等于平台抬升时间，等待时间和回程时间的总时间<ul><li>灯灭延迟: 正常层的灯灭延迟，真正的机器灭灯时间 = max（z 轴上下移动的总时间， 配置的灭灯延迟）</li><li>底层灯灭延迟: 底层的灯灭延迟，真正的机器灭灯时间 = max（z 轴上下移动的总时间， 配置的灭灯延迟）</li></ul> |
| 底层抬升距离     | 底层打印过程中，打印平台每次远离打印面的距离                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 抬升距离         | 正常层打印过程中，打印平台每次远离打印面的距离                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 底层回程距离     | 底层打印过程中，打印平台的回程距离，没有充足理由的情况下不要改动                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 回程距离         | 正常层打印过程中，打印平台的回程距离，没有充足理由的情况下不要改动                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 底层抬升速度     | 底层打印过程中，打印平台每次远离打印面的运动速度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 抬升速度         | 正常层打印过程中，打印平台每次远离打印面的运动速度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 底层回程速度     | 底层打印过程中，打印平台靠近打印成形面时的运动速度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 回程速度         | 正常层打印过程中，打印平台靠近打印成形面时的运动速度                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

### 二段运动控制 TSMC

<Collapse title="Anycubic 用户须知！">
	从 Anycubic Photon Workshop 而来？注意！

    * 由于 Anycubic Photon Workshop 提供基本和高级设置，而 CHITUBOX 的格式缺少专门的字段来区分它们，因此，对于不兼容高级设置的打印机，CHITUBOX 仅显示基本参数。相反，对于同时支持两者的打印机，CHITUBOX 仅显示高级参数。如果您的打印机支持高级设置，但您不想使用 TSMC 功能，您只需为两个阶段输入相同的速度，并确保总升降距离与所需距离保持一致。

    * 用户界面中 TSMC 参数的顺序不同。在 Photon Workshop 中，[0] 表示靠近屏幕的运动阶段，而 [1] 表示较远的运动阶段。然而，CHITUBOX 在布局输入文本框时遵循运动顺序。这起初可能会令人困惑。
</Collapse>

打印设置中有两组抬升和回程参数，这里是设置 TSMC 的地方。

当打印平台开始带着模型升起时，树脂料槽底部的离型膜会将刚固化的层向下拉，直至脱离，这称为“吸力效应”。当与离型膜接触面积较大，且打印平台以较高速度拉开时，吸力效应更为明显。吸力效应会导致模型变形，甚至导致模型从打印平台上脱落。我们建议保持缓慢的升起速度，直到模型脱离离型膜。当吸力效应不再是问题时，随后加快升起速度可以提高打印效率。回程阶段的原理类似。

您可以调整以下参数以熟悉 TSMC。

<Tsmc />

### 缓冲层

<Collapse title={"此设置仅适用于 Creality 打印机。"}>
	<Admonition type="note" title="注意">
		此设置目前仅适用于部分具有较大打印平台的 Creality 打印机。例如：HALOT-MAGE S，HALOT-MAGE PRO。
	</Admonition>

    设置缓冲层，可以减缓平台快速下降时的冲击力，避免树脂飞溅的问题。

    | 参数           | 说明                     |
    | -------------- | ------------------------ |
    | 缓冲层高度     | 缓冲层的高度。           |
    | 缓冲层电机速度 | 经过缓冲层时的电机速度。 |
    | 缓冲层灯灭延时 | 缓冲层的灯灭延时时长。   |
</Collapse>

## Gcode

<Admonition type="warning" title="警告">
	如果你不知道你在做什么，请不要修改这里的代码。
</Admonition>

<Admonition type="note" title="注意">
	只有 _.zip_ 格式和它的衍生格式（例如 _.cws_）支持 Gcode 编辑。
</Admonition>

## 高级

### 底层光强 PWM

底层光强的脉冲宽度调制，范围从 `0` 到 `255`，控制底层曝光时 UV 光源的光强。

单击 <SpanA href="https://baike.baidu.com/item/%E8%84%89%E5%86%B2%E5%AE%BD%E5%BA%A6%E8%B0%83%E5%88%B6">此处</SpanA> 了解有关 PWM 的更多信息。

### 光强 PWM

正常层光强的脉冲宽度调制，范围从 `0` 到 `255`，控制 UV 光源的光强。

### 图像灰度

图像灰度等级，类似光强 PWM，但图像灰度不改变 UV 光强，它改变的是 LCD 屏幕的透光率。

### 抗锯齿

对图像边缘的三角形锯齿进行柔化处理以实现物体更光滑的表面效果。相邻三角形锯齿间通过增加或删除一定灰度的像素单元可以调控边缘曝光的连续性和透光强度，进而实现边缘区域更加光滑的效果。

#### 灰度级别

该模式适用于 _.ctb_ 格式。

| 参数         | 描述                                                                                                     |
| ------------ | -------------------------------------------------------------------------------------------------------- |
| 灰度级别     | 范围：`0` ~ `255`。`0` 代表黑色，`255` 代表白色。它决定了可用于抗锯齿的灰度范围。                        |
| 图像模糊像素 | 可用值：`2` ~ `8`。决定边缘过渡的像素数，您选择的级别越高，边缘就越柔和。类似于 Photoshop 中的羽化功能。 |

#### 抗锯齿级别

这是旧模式，仅适用于 _.cbddlp_ 格式。

| 参数       | 描述                                                                                                                          |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------- |
| 抗锯齿级别 | 可用值：`2`、`4`、`8`。它决定了边缘的曝光时间。您选择的级别越高，曝光时间就越长，这将导致边缘更加锐利，从而降低抗锯齿的效果。 |

-   _抗锯齿级别_：`2`，`4`，`8`，**适用于 _.cbddlp_ 格式**，控制边缘曝光时间。等级越高时间越长，边缘越清晰，抗锯齿效果越低。

-   _启用图像模糊_： 启用/关闭图像模糊。**适用于 _.ctb_ 格式**。

    -   _图像模糊像素_：`2` ~ `8`，决定了边缘过渡像素的数量，等级越高，边缘越模糊。类似于 Photoshop 中的羽化功能。

### 缩放补偿

模型在 X，Y，Z 方向上按照一定比例进行缩放补偿。百分比是与原始模型相比的大小，默认值为 100%。 设置合适的缩放补偿数值来弥补 3D 打印过程中由于材料收缩、热膨胀等因素导致的尺寸误差。

百分比数值越大，模型实体越大。

百分比数值越小，模型实体越小。

### 公差补偿

正常层的内外径尺寸补偿。

a 的值越大，内径越小，模型实体越大。

a 的值越小，内径越大，模型实体越小。

b 为正值（补偿模型收缩部分），内径减小，模型实体增大。

b 为负值（补偿模型膨胀部分），内径增大，模型实体减小。

### 底部公差补偿

底层的内外直径补偿。通常此设置用于解决“大象腿”的问题。

a 的值越大，内径越小，模型实体越大。

a 的值越小，内径越大，模型实体越小。

b 为正值（补偿模型收缩部分），内径减小，模型实体增大。

b 为负值（补偿模型膨胀部分），内径增大，模型实体减小。

<Admonition type="note" title="注意">
	1. 当禁用底层公差补偿时，普通层公差补偿将对整个模型生效。 1.
	底层公差补偿仅作用于底层，当过渡层和底层公差补偿同时启用时，打印结果可能不如预期。
	<div className="flex">
		<div className="flex-1 flex justify-center">
			<img
				src={
					"/images/docs/en-US/chitubox-basic/2.x.x/009-configure-print-parameters-transition_layers.png"
				}
			/>
		</div>
		<div className="flex-1 flex justify-center">
			<img
				src={
					"/images/docs/en-US/chitubox-basic/2.x.x/009-configure-print-parameters-tc.png"
				}
			/>
		</div>
		<div className="flex-1 flex justify-center">
			<img
				src={
					"/images/docs/en-US/chitubox-basic/2.x.x/009-configure-print-parameters-tc_transition_layers.png"
				}
			/>
		</div>
	</div>
	<div className="flex text-gray-500 text-sm">
		<div className="flex-1 text-center">仅设置过渡层</div>
		<div className="flex-1 text-center">仅开启底部公差补偿</div>
		<div className="flex-1 text-center">同时启用过渡层与底层公差补偿</div>
	</div>
</Admonition>

### 层打印时间补偿

部分高分辨率打印机在加载数据时可能会有额外的延迟，从而导致预估打印时间不准确。可以通过设置打印时间补偿来改善这个问题。

-   **手动输入**

    层打印时间补偿: 一个在 `-99.99` 和 `99.99` 之间的 2 位数，默认为 `0` 秒。

    当启用时，

    单层的预估打印时间 = 曝光时间 + 等待时间 + 运动时间 + 层打印时间补偿

-   **自动生成**

    <ImageContainer
    	src={
    		"/images/docs/zh-CN/chitubox-pro/2.x.x/014-slice-settings-print-time-compensation.png"
    	}
    />

    $$\text{层打印时间补偿} = \frac{\text{实际打印时间} - \text{软件预测时间}}{\text{打印总层数}}$$

<Admonition type="note" title="注意">
	设置完参数请点击 <b>应用</b>，否则参数不生效。
</Admonition>

### 蒙版

蒙版是为了解决一个常见的光源问题而设计的：光源在屏幕上不同位置的光强不均匀，这通常是由于使用了不合适的光源所致，蒙版的目的是通过调节屏幕不同区域的透光率从而提供一层修正层，使得原本不均匀的光源变得均匀。

_蒙版文件_： 你可以通过点击 `...` 图标来选择现有的文件，或者点击齿轮图标<GearIcon />以使用 CHITUBOX 内置的 <NextLink href="#蒙版生成器">蒙版生成器</NextLink> 来生成一张蒙版图片。 <br />
_灰度单位_：点击 <NextLink href="#灰度单位">此处</NextLink> 了解灰度单位。

#### 蒙版生成器

##### 中心辐射

**中心辐射** 生成类似涟漪的图案，圈数由**等分数量**设置。圆圈半径呈等分数列递增，递增量由**等分半径**设置。

**灰度参数** 的范围为 `0` (黑) 到 `255` (白)。

<ImageContainer
	src={
		"/images/docs/zh-CN/chitubox-pro/2.x.x/014-slice-settings-hub-and-spoke.png"
	}
/>

举个例子，如果 **等分数量** 设为 5，**等分半径**设为 3 毫米，则涟漪图案的半径为

$$ 5 \times 3 = 15 \text{mm}$$

下图为不同**等分半径**的对比图：

<div className="max-w-screen-sm">
	<ImageComparison
		img1Src={
			"/images/docs/zh-CN/chitubox-pro/1.x.x/004-setting-up-configure-printer-parameters004.equal_radius_1.png"
		}
		text1={"等分數量設為 5, 等分半徑設為 1mm"}
		img2Src={
			"/images/docs/zh-CN/chitubox-pro/1.x.x/004-setting-up-configure-printer-parameters004.equal_radius_3.png"
		}
		text2={"等分數量設為 5, 等分半徑設為 3mm"}
	/>
</div>

##### 矩阵模式

**矩阵模式** 生成一个矩阵形状的图。行和列分别由 `m` 和 `n` 分别设置。
**灰度参数** 的范围为 `0` (黑) 到 `255` (白)。

举个例子，下图为一个由不同灰度组成的 2 × 3 矩阵。

<ImageContainer
	src={
		"/images/docs/zh-CN/chitubox-pro/2.x.x/014-slice-settings-matrix-mode.png"
	}
/>

<ImageContainer
	src={
		"/images/docs/zh-CN/chitubox-pro/1.x.x/004-setting-up-configure-printer-parameters004.2x3_matrix.png"
	}
	style={{ maxWidth: "350px" }}
/>

#### 灰度单位

**灰度单位** 的原理是在 X 轴方向上对指定数量像素的灰度取平均值并应用到对应的像素上。

举个例子：

假设打印平台的尺寸是 80mm × 120mm，屏幕的分辨率为 800px × 1200px。

下图为蒙版图，分辨率也是 800px × 1200px。其中所有的小方块的分辨率均为 50px × 50px。

<ImageContainer
	src={
		"/images/docs/zh-CN/chitubox-pro/1.x.x/004-setting-up-configure-printer-parameters004.3.png"
	}
	style={{ width: 400 }}
/>

如果将 **灰度单位** 设为 51px, 则处理后的图片将如下图所示：

<ImageContainer
	src={
		"/images/docs/zh-CN/chitubox-pro/1.x.x/004-setting-up-configure-printer-parameters004.4.png"
	}
	style={{ width: 400 }}
/>

灰度从左到右逐渐变灰，这是因为原图上的每 51 个像素灰度被平均了。
考虑第一行的情况。第一组 51 像素的灰度是 50 个黑像素和 1 个白像素的平均值，因此结果会比黑色略浅一点点，虽然这个改变几乎肉眼不可见。第二组 51 像素的灰度是 49 个白像素和 2 个黑像素的平均值，因此结果会比白色略暗一点点。第三组 51 像素的灰度是 48 个黑像素和 3 个白像素的平均值，依此类推，直到剩下的余数 35 个白像素。

$$\frac{800}{51} = 15$$，余数 35

这个部分则由它们自己取平均值，因此灰度没有变化。
